# Spring Rest Docs + Swagger UI 사용하기

## 설정

- Build.gradle

``` gradle
buildscript {
    ext {
        set('epagesRestDocsApiSpecVersion', "0.16.4")                
        set('staticsDir', file('src/main/resources/static'))    // openapi 가 생성될 위치
    }
}

plugins {
    id 'com.epages.restdocs-api-spec' version "$epagesRestDocsApiSpecVersion"  // Rest Docs -> Open API 3 스팩으로 출력하는 Gradle task가 포함
}

dependencies {
    testImplementation 'org.springframework.restdocs:spring-restdocs-mockmvc'                      // Rest Docs
    testImplementation "com.epages:restdocs-api-spec-mockmvc:${epagesRestDocsApiSpecVersion}"      // Rest Docs -> Open API 3 Spec
}

openapi3 {  // openapi3로 Opnen API 3 스팩을 만들 때 필요한 부가정보

		// Swagger로 API 테스트 시 요청을 보낼 서버 uri. 1개만 지정할 때는 server를. 각각 다른 환경을 지정하고 싶다면 servers를 사용하면 된다.
    server = 'http://localhost:8080'
		servers = [
            { url = "http://localhost:8080" },          // local
            { url = "http://dev-lifelog.huray.io" },    // dev
            { url = "http://lifelog.huray.io" }         // prd
    ]

    title = 'MY API'
    description = 'My API description'
    version = '0.1.0'
    format = 'yaml'
    outputDirectory = "$staticsDir/docs"  // openapi3 파일이 해당 위치에 생성되어야 빌드 시 다른 정적 파일들과 함께 빌드된다.
}


// ---

// 만약 빌드시 openapi3가 생성되지 않는다면 아래 테스크 설정. bootJar 실행 전, openapi3 를 실행하도록 한다. 배포 시 Github Actions를 이용한다면 빌드 전 openapi3 테스크를 수행하게 해도 된다.
bootJar {
    dependsOn 'openapi3'
}
```
